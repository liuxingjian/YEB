{"remainingRequest":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\views\\sal\\SalSobCfg.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\views\\sal\\SalSobCfg.vue","mtime":1666527853824},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\babel.config.js","mtime":1666527853821},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js","mtime":1666529051466},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js","mtime":1666529052140}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTYWxTb2JDZmciLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbXBzOiBbXSwKICAgICAgc2FsYXJpZXM6IFtdLAogICAgICBjdXJyZW50U2FsYXJ5OiBudWxsLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgc2l6ZTogMTAsCiAgICAgIHRvdGFsOiAwCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEVtcCgpOwogICAgdGhpcy5pbml0U2FsYXJ5KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKGN1cnJlbnRQYWdlKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBjdXJyZW50UGFnZTsKICAgICAgdGhpcy5pbml0RW1wKCk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZShzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemU7CiAgICAgIHRoaXMuaW5pdEVtcCgpOwogICAgfSwKICAgIGhpZGVTYWxhcnkoZGF0YSkgewogICAgICBpZiAoZGF0YS5zYWxhcnkpIHsKICAgICAgICBpZiAodGhpcy5jdXJyZW50U2FsYXJ5ICE9PSBkYXRhLnNhbGFyeS5pZCkgewogICAgICAgICAgdGhpcy5wb3N0UmVxdWVzdCgnL3NhbGFyeS9zb2JjZmcvdXBkYXRlLycgKyBkYXRhLmlkICsgJy8nICsgdGhpcy5jdXJyZW50U2FsYXJ5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICB0aGlzLmluaXRFbXAoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmN1cnJlbnRTYWxhcnkpIHsKICAgICAgICAgIHRoaXMucG9zdFJlcXVlc3QoJy9zYWxhcnkvc29iY2ZnL3VwZGF0ZS8nICsgZGF0YS5pZCArICcvJyArIHRoaXMuY3VycmVudFNhbGFyeSkudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgdGhpcy5pbml0RW1wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNob3dTYWxhcnkoc2FsKSB7CiAgICAgIGlmIChzYWwpIHsKICAgICAgICB0aGlzLmN1cnJlbnRTYWxhcnkgPSBzYWwuaWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJyZW50U2FsYXJ5ID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGluaXRTYWxhcnkoKSB7CiAgICAgIHRoaXMuZ2V0UmVxdWVzdCgnL3NhbGFyeS9zb2IvbGlzdEFsbCcpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICB0aGlzLnNhbGFyaWVzID0gcmVzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaW5pdEVtcCgpIHsKICAgICAgdGhpcy5wb3N0UmVxdWVzdCgnL3NhbGFyeS9zb2JjZmcvbGlzdEFsbC8/Y3VycmVudFBhZ2U9JyArIHRoaXMuY3VycmVudFBhZ2UgKyAnJnNpemU9JyArIHRoaXMuc2l6ZSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHRoaXMuZW1wcyA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":"AA2IA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA;UACA,gFACAC;YACA;cACA;YACA;UACA;QACA;MACA;QACA;UACA,gFACAA;YACA;cACA;YACA;UACA;QACA;MACA;IAEA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA,mGACAH;QACA;UACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","emps","salaries","currentSalary","currentPage","size","total","mounted","methods","handleCurrentChange","handleSizeChange","hideSalary","then","showSalary","initSalary","initEmp"],"sourceRoot":"src/views/sal","sources":["SalSobCfg.vue"],"sourcesContent":["<template>\n    <div>\n        <el-table\n                :data=\"emps\"\n                stripe\n                size=\"mini\"\n                style=\"width: 100%\">\n            <el-table-column\n                    type=\"selection\"\n                    align=\"left\"\n                    width=\"55\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"name\"\n                    label=\"姓名\"\n                    align=\"center\"\n                    fixed\n                    width=\"80\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"workID\"\n                    label=\"工号\"\n                    align=\"center\"\n                    width=\"100\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"email\"\n                    label=\"邮箱地址\"\n                    align=\"center\"\n                    width=\"180\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"phone\"\n                    label=\"电话号码\"\n                    align=\"center\"\n                    width=\"130\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"department.name\"\n                    label=\"所属部门\"\n                    align=\"center\"\n                    width=\"130\">\n            </el-table-column>\n            <el-table-column\n                    label=\"工资账套\"\n                    align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-tooltip placement=\"right\" v-if=\"scope.row.salary\">\n                        <template #content>\n                           <table>\n                               <tr>\n                                   <td>基本工资:</td>\n                                   <td>{{scope.row.salary.basicSalary}}</td>\n                               </tr>\n                               <tr>\n                                   <td>奖金:</td>\n                                   <td>{{scope.row.salary.bonus}}</td>\n                               </tr>\n                               <tr>\n                                   <td>午餐补助:</td>\n                                   <td>{{scope.row.salary.lunchSalary}}</td>\n                               </tr>\n                               <tr>\n                                   <td>交通补助:</td>\n                                   <td>{{scope.row.salary.trafficSalary}}</td>\n                               </tr>\n                               <tr>\n                                   <td>养老金比率:</td>\n                                   <td>{{scope.row.salary.pensionBase}}</td>\n                               </tr>\n                               <tr>\n                                   <td>养老金基数:</td>\n                                   <td>{{scope.row.salary.pensionPer}}</td>\n                               </tr>\n                               <tr>\n                                   <td>医疗保险基数:</td>\n                                   <td>{{scope.row.salary.medicalBase}}</td>\n                               </tr>\n                               <tr>\n                                   <td>医疗保险比率:</td>\n                                   <td>{{scope.row.salary.medicalPer}}</td>\n                               </tr>\n                               <tr>\n                                   <td>公积金基数:</td>\n                                   <td>{{scope.row.salary.accumulationFundBase}}</td>\n                               </tr>\n                               <tr>\n                                   <td>公积金:</td>\n                                   <td>{{scope.row.salary.accumulationFundPer}}</td>\n                               </tr>\n\n                           </table>\n                        </template>\n                        <el-tag>{{scope.row.salary.name}}</el-tag>\n                    </el-tooltip>\n                    <el-tag v-else>暂未设置</el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                    label=\"操作\"\n                    align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-popover\n                            placement=\"left\"\n                            title=\"编辑工资账套\"\n                            :width=\"200\"\n                            @show=\"showSalary(scope.row.salary)\"\n                            @hide=\"hideSalary(scope.row)\"\n                            trigger=\"click\"\n                    >\n                        <div>\n                            <el-select v-model=\"currentSalary\" size=\"mini\" placeholder=\"请选择\">\n                                <el-option\n                                        v-for=\"item in salaries\"\n                                        :key=\"item.id\"\n                                        :label=\"item.name\"\n                                        :value=\"item.id\"\n                                ></el-option>\n                            </el-select>\n                        </div>\n                        <el-button slot=\"reference\" type=\"danger\">修改工资账套</el-button>\n                    </el-popover>\n                </template>\n            </el-table-column>\n        </el-table>\n        <el-pagination\n                style=\"display: flex;justify-content: flex-end\"\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"currentPage\"\n                :page-sizes=\"[10, 20, 30, 40, 50, 100]\"\n                :page-size=\"size\"\n                layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"total\">\n        </el-pagination>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"SalSobCfg\",\n        data(){\n            return {\n                emps: [],\n                salaries:[],\n                currentSalary: null,\n                currentPage: 1,\n                size: 10,\n                total: 0,\n            }\n        },\n        mounted() {\n            this.initEmp()\n            this.initSalary()\n        },\n        methods:{\n            handleCurrentChange(currentPage) {\n                this.currentPage = currentPage\n                this.initEmp()\n            },\n            handleSizeChange(size) {\n                this.size = size\n                this.initEmp()\n            },\n            hideSalary(data){\n                if (data.salary){\n                    if (this.currentSalary !== data.salary.id){\n                        this.postRequest('/salary/sobcfg/update/'+data.id+'/'+this.currentSalary)\n                            .then(res =>{\n                                if (res){\n                                    this.initEmp()\n                                }\n                            })\n                    }\n                }else {\n                    if (this.currentSalary){\n                        this.postRequest('/salary/sobcfg/update/'+data.id+'/'+this.currentSalary)\n                            .then(res =>{\n                                if (res){\n                                    this.initEmp()\n                                }\n                            })\n                    }\n                }\n\n            },\n            showSalary(sal){\n                if (sal){\n                    this.currentSalary = sal.id\n                }else {\n                    this.currentSalary = null\n                }\n            },\n            initSalary(){\n                this.getRequest('/salary/sob/listAll').then(res =>{\n                    if (res){\n                        this.salaries = res\n                    }\n                })\n            },\n            initEmp(){\n                this.postRequest('/salary/sobcfg/listAll/?currentPage='+this.currentPage+'&size='+this.size)\n                .then(res => {\n                    if (res){\n                        this.emps = res.data\n                        this.total = res.total\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}