{"remainingRequest":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\components\\sys\\basic\\DepMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\components\\sys\\basic\\DepMana.vue","mtime":1666527853824},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\babel.config.js","mtime":1666527853821},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js","mtime":1666529051466},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js","mtime":1666529052140}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXBNYW5hIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmlsdGVyVGV4dDogJycsCiAgICAgIGRlcHREYXRhOiBbXSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgbGFiZWw6ICduYW1lJwogICAgICB9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGVwdDogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHBhcmVudElkOiAtMQogICAgICB9LAogICAgICBwTmFtZTogJycKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZmlsdGVyVGV4dCh2YWwpIHsKICAgICAgdGhpcy4kcmVmcy50cmVlLmZpbHRlcih2YWwpOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdERlcHQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dBZGQoZGVwdCkgewogICAgICB0aGlzLmRlcHQucGFyZW50SWQgPSBkZXB0LmlkOwogICAgICB0aGlzLnBOYW1lID0gZGVwdC5uYW1lOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGFkZERlcHQoKSB7CiAgICAgIHRoaXMucG9zdFJlcXVlc3QoJy9zeXN0ZW0vYmFzaWMvZGVwYXJ0bWVudC9hZGQnLCB0aGlzLmRlcHQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICB0aGlzLmluaXREZXB0KCk7CiAgICAgICAgICB0aGlzLmRlcHQgPSB7fTsKICAgICAgICAgIHRoaXMucE5hbWUgPSAnJzsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlRGVwdChkZXB0KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOOAkCcgKyBkZXB0Lm5hbWUgKyAn44CR6YOo6ZeoLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMuZGVsZXRlUmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9kZXBhcnRtZW50L2RlbGV0ZS8nICsgZGVwdC5pZCkudGhlbihyZXNwID0+IHsKICAgICAgICAgIGlmIChyZXNwKSB7CiAgICAgICAgICAgIHRoaXMuaW5pdERlcHQoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgcmV0dXJuIGRhdGEubmFtZS5pbmRleE9mKHZhbHVlLnRyaW0oKSkgIT09IC0xOwogICAgfSwKICAgIGluaXREZXB0KCkgewogICAgICB0aGlzLmdldFJlcXVlc3QoJy9zeXN0ZW0vYmFzaWMvZGVwYXJ0bWVudC9saXN0QWxsJykudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHRoaXMuZGVwdERhdGEgPSByZXM7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"AA8DA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;QACAR;QACAS;MACA;MACAC;IACA;EACA;EACAC;IACAT;MACA;IACA;EACA;EACAU;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;MACA;QACA;UACA;YACA;UACA;QACA;MACA;QACA;UACAA;UACAC;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","filterText","deptData","defaultProps","children","label","dialogVisible","dept","parentId","pName","watch","mounted","methods","showAdd","addDept","deleteDept","confirmButtonText","cancelButtonText","type","message","filterNode","initDept"],"sourceRoot":"src/components/sys/basic","sources":["DepMana.vue"],"sourcesContent":["<template>\n    <div style=\"width: 500px\">\n        <el-input\n                prefix-icon=\"el-icon-search\"\n                placeholder=\"输入关键字进行部门过滤...\"\n                v-model=\"filterText\">\n        </el-input>\n\n        <el-tree\n                :data=\"deptData\"\n                :props=\"defaultProps\"\n                default-expand-all\n                :filter-node-method=\"filterNode\"\n                :expand-on-click-node=\"false\"\n                ref=\"tree\">\n            <span class=\"custom-tree-node\"\n                  slot-scope=\"{ node, data }\"\n                  style=\"display: flex;justify-content: space-between;width: 100%\">\n                <span>{{ data.name }}</span>\n                <span>\n                      <el-button\n                              class=\"btnStyle\"\n                              type=\"primary\"\n                              size=\"mini\"\n                              @click=\"() => showAdd(data)\">\n                        添加部门\n                      </el-button>\n                      <el-button\n                              class=\"btnStyle\"\n                              type=\"danger\"\n                              size=\"mini\"\n                              @click=\"() => deleteDept(data)\">\n                        删除部门\n                      </el-button>\n                    </span>\n            </span>\n        </el-tree>\n        <el-dialog\n                title=\"添加部门\"\n                :visible.sync=\"dialogVisible\"\n                width=\"30%\">\n            <div>\n                <table>\n                    <tr>\n                        <td><el-tag>上级部门</el-tag></td>\n                        <td>{{pName}}</td>\n                    </tr>\n                    <tr>\n                        <td><el-tag>部门名称</el-tag></td>\n                        <td><el-input v-model=\"dept.name\" placeholder=\"请输入部门名称...\"></el-input></td>\n                    </tr>\n                </table>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"addDept\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"DepMana\",\n        data() {\n            return {\n                filterText: '',\n                deptData: [],\n                defaultProps: {\n                    children: 'children',\n                    label: 'name'\n                },\n                dialogVisible: false,\n                dept: {\n                    name: '',\n                    parentId: -1\n                },\n                pName: ''\n            }\n        },\n        watch: {\n            filterText(val) {\n                this.$refs.tree.filter(val);\n            }\n        },\n        mounted() {\n            this.initDept();\n        },\n        methods: {\n            showAdd(dept){\n                this.dept.parentId = dept.id\n                this.pName = dept.name\n                this.dialogVisible = true\n            },\n            addDept(){\n                this.postRequest('/system/basic/department/add',this.dept).then(res => {\n                    if (res) {\n                        this.initDept();\n                        this.dept = {};\n                        this.pName= '';\n                        this.dialogVisible = false\n                    }\n                });\n            },\n            deleteDept(dept){\n                this.$confirm('此操作将永久删除【'+dept.name+'】部门, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteRequest('/system/basic/department/delete/'+dept.id).then(resp=>{\n                        if (resp){\n                            this.initDept();\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n            },\n            filterNode(value, data) {\n                if (!value) return true;\n                return data.name.indexOf(value.trim()) !== -1;\n            },\n            initDept() {\n                this.getRequest('/system/basic/department/listAll').then(res => {\n                    if (res) {\n                        this.deptData = res\n                    }\n                });\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    .btnStyle{\n        padding: 2px;\n    }\n</style>\n"]}]}