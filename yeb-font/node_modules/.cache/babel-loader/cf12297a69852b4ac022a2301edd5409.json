{"remainingRequest":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\thread-loader\\dist\\cjs.js!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\store\\index.js","dependencies":[{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\store\\index.js","mtime":1666527853824},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\babel.config.js","mtime":1666527853821},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js","mtime":1666529051466}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCB7IGdldFJlcXVlc3QgfSBmcm9tICIuLi91dGlscy9hcGkiOwppbXBvcnQgU29ja0pTIGZyb20gJ3NvY2tqcy1jbGllbnQnOwppbXBvcnQgU3RvbXAgZnJvbSAnc3RvbXBqcyc7CmltcG9ydCB7IE5vdGlmaWNhdGlvbiB9IGZyb20gJ2VsZW1lbnQtdWknOwpWdWUudXNlKFZ1ZXgpOwpjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwpjb25zdCBzdG9yZSA9IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogewogICAgcm91dGVzOiBbXSwKICAgIHNlc3Npb25zOiB7fSwKICAgIGFkbWluczogW10sCiAgICBjdXJyZW50QWRtaW46IEpTT04ucGFyc2Uod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSksCiAgICBjdXJyZW50U2Vzc2lvbjogbnVsbCwKICAgIGZpbHRlcktleTogJycsCiAgICBzdG9tcDogbnVsbCwKICAgIGlzRG90OiB7fQogIH0sCiAgLy/llK/kuIDlj6/ku6XmlLnlj5hzdGF0ZeWAvOeahOaWueazlSjlkIzmraXmiafooYwpCiAgbXV0YXRpb25zOiB7CiAgICBVTklPTl9BRE1JTihzdGF0ZSwgYWRtaW4pIHsKICAgICAgc3RhdGUuY3VycmVudEFkbWluID0gYWRtaW47CiAgICB9LAogICAgSU5JVF9BRE1JTlMoc3RhdGUsIGRhdGEpIHsKICAgICAgc3RhdGUuYWRtaW5zID0gZGF0YTsKICAgIH0sCiAgICAvL+WIneWni+WMlnN0YXRl5pWw5o2uCiAgICBpbml0Um91dGVzKHN0YXRlLCBkYXRhKSB7CiAgICAgIHN0YXRlLnJvdXRlcyA9IGRhdGE7CiAgICB9LAogICAgY2hhbmdlQ3VycmVudFNlc3Npb24oc3RhdGUsIGN1cnJlbnRTZXNzaW9uKSB7CiAgICAgIHN0YXRlLmN1cnJlbnRTZXNzaW9uID0gY3VycmVudFNlc3Npb247CiAgICAgIFZ1ZS5zZXQoc3RhdGUuaXNEb3QsIHN0YXRlLmN1cnJlbnRBZG1pbi51c2VybmFtZSArICcjJyArIHN0YXRlLmN1cnJlbnRTZXNzaW9uLnVzZXJuYW1lLCBmYWxzZSk7CiAgICB9LAogICAgYWRkTWVzc2FnZShzdGF0ZSwgbXNnKSB7CiAgICAgIGxldCBtc3MgPSBzdGF0ZS5zZXNzaW9uc1tzdGF0ZS5jdXJyZW50QWRtaW4udXNlcm5hbWUgKyAnIycgKyBtc2cudG9dOwogICAgICBpZiAoIW1zcykgewogICAgICAgIFZ1ZS5zZXQoc3RhdGUuc2Vzc2lvbnMsIHN0YXRlLmN1cnJlbnRBZG1pbi51c2VybmFtZSArICcjJyArIG1zZy50bywgW10pOwogICAgICB9CiAgICAgIHN0YXRlLnNlc3Npb25zW3N0YXRlLmN1cnJlbnRBZG1pbi51c2VybmFtZSArICcjJyArIG1zZy50b10ucHVzaCh7CiAgICAgICAgY29udGVudDogbXNnLmNvbnRlbnQsCiAgICAgICAgZGF0ZTogbmV3IERhdGUoKSwKICAgICAgICBzZWxmOiAhbXNnLm5vdFNlbGYKICAgICAgfSk7CiAgICB9LAogICAgSU5JVF9EQVRBKHN0YXRlKSB7CiAgICAgIC8vIOa1j+iniOWZqOacrOWcsOeahOWOhuWPsuiBiuWkqeiusOW9lQogICAgICBsZXQgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd2dWUtY2hhdC1zZXNzaW9uJyk7CiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgc3RhdGUuc2Vzc2lvbnMgPSBKU09OLnBhcnNlKGRhdGEpOwogICAgICB9CiAgICB9CiAgfSwKICAvL+WUr+S4gOWPr+S7peaUueWPmHN0YXRl5YC855qE5pa55rOVKOW8guatpeaJp+ihjCkKICBhY3Rpb25zOiB7CiAgICBjb25uZWN0KGNvbnRleHQpIHsKICAgICAgY29udGV4dC5zdGF0ZS5zdG9tcCA9IFN0b21wLm92ZXIobmV3IFNvY2tKUygnL3dzL2VwJykpOwogICAgICBsZXQgdG9rZW4gPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5TdHInKTsKICAgICAgY29udGV4dC5zdGF0ZS5zdG9tcC5jb25uZWN0KHsKICAgICAgICAnQXV0aC1Ub2tlbic6IHRva2VuCiAgICAgIH0sIHN1Y2Nlc3MgPT4gewogICAgICAgIGNvbnRleHQuc3RhdGUuc3RvbXAuc3Vic2NyaWJlKCcvdXNlci9xdWV1ZS9jaGF0JywgbXNnID0+IHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1zZy5ib2R5KQogICAgICAgICAgbGV0IHJlY2VpdmVNc2cgPSBKU09OLnBhcnNlKG1zZy5ib2R5KTsKICAgICAgICAgIGlmICghY29udGV4dC5zdGF0ZS5jdXJyZW50U2Vzc2lvbiB8fCByZWNlaXZlTXNnLmZyb20gIT09IGNvbnRleHQuc3RhdGUuY3VycmVudFNlc3Npb24udXNlcm5hbWUpIHsKICAgICAgICAgICAgTm90aWZpY2F0aW9uLmluZm8oewogICAgICAgICAgICAgIHRpdGxlOiAn44CQJyArIHJlY2VpdmVNc2cubmlja05hbWUgKyAn44CR5Y+R5p2l5LiA5p2h5raI5oGv77yBJywKICAgICAgICAgICAgICBtZXNzYWdlOiByZWNlaXZlTXNnLmNvbnRlbnRsZW5ndGggPiAxMCA/IHJlY2VpdmVNc2cuY29udGVudC5zdWJzdHIoMCwgMTApIDogcmVjZWl2ZU1zZy5jb250ZW50LAogICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tLXJpZ2h0JwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgVnVlLnNldChjb250ZXh0LnN0YXRlLmlzRG90LCBjb250ZXh0LnN0YXRlLmN1cnJlbnRBZG1pbi51c2VybmFtZSArICcjJyArIHJlY2VpdmVNc2cuZnJvbSwgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZWNlaXZlTXNnLm5vdFNlbGYgPSB0cnVlOwogICAgICAgICAgcmVjZWl2ZU1zZy50byA9IHJlY2VpdmVNc2cuZnJvbTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdhZGRNZXNzYWdlJywgcmVjZWl2ZU1zZyk7CiAgICAgICAgfSk7CiAgICAgIH0sIGVycm9yID0+IHt9KTsKICAgIH0sCiAgICBpbml0RGF0YShjb250ZXh0KSB7CiAgICAgIGNvbnRleHQuY29tbWl0KCdJTklUX0RBVEEnKTsKICAgICAgZ2V0UmVxdWVzdCgnL2NoYXQvbGlzdEFsbCcpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnSU5JVF9BRE1JTlMnLCByZXMpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9KTsKc3RvcmUud2F0Y2goZnVuY3Rpb24gKHN0YXRlKSB7CiAgcmV0dXJuIHN0YXRlLnNlc3Npb25zOwp9LCBmdW5jdGlvbiAodmFsKSB7CiAgLy8gY29uc29sZS5sb2coJ0NIQU5HRTogJywgdmFsKTsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndnVlLWNoYXQtc2Vzc2lvbicsIEpTT04uc3RyaW5naWZ5KHZhbCkpOwp9LCB7CiAgZGVlcDogdHJ1ZSAvKui/meS4quiyjOS8vOaYr+W8gOWQr3dhdGNo55uR5rWL55qE5Yik5patLOWumOaWueivtOaYjuS5n+avlOi+g+aooeeziiovCn0pOwoKZXhwb3J0IGRlZmF1bHQgc3RvcmU7"},{"version":3,"names":["Vue","Vuex","getRequest","SockJS","Stomp","Notification","use","now","Date","store","Store","state","routes","sessions","admins","currentAdmin","JSON","parse","window","sessionStorage","getItem","currentSession","filterKey","stomp","isDot","mutations","UNION_ADMIN","admin","INIT_ADMINS","data","initRoutes","changeCurrentSession","set","username","addMessage","msg","mss","to","push","content","date","self","notSelf","INIT_DATA","localStorage","actions","connect","context","over","token","success","subscribe","receiveMsg","body","from","info","title","nickName","message","contentlength","substr","position","commit","error","initData","then","res","modules","watch","val","setItem","stringify","deep"],"sources":["D:/workplace/myProject/yeb/yeb1/yeb/yeb-font/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport {getRequest} from \"../utils/api\";\nimport SockJS from 'sockjs-client'\nimport Stomp from 'stompjs'\nimport { Notification } from 'element-ui';\n\nVue.use(Vuex)\n\nconst now = new Date();\n\nconst store = new Vuex.Store({\n    state: {\n        routes:[],\n        sessions: {},\n        admins:[],\n        currentAdmin: JSON.parse(window.sessionStorage.getItem('user')),\n        currentSession: null,\n        filterKey:'',\n        stomp: null,\n        isDot: {}\n    },\n    //唯一可以改变state值的方法(同步执行)\n    mutations: {\n        UNION_ADMIN(state,admin){\n            state.currentAdmin = admin\n        },\n        INIT_ADMINS(state,data){\n            state.admins = data\n        },\n        //初始化state数据\n        initRoutes(state,data){\n            state.routes=data;\n        },\n        changeCurrentSession (state,currentSession) {\n            state.currentSession = currentSession;\n            Vue.set(state.isDot\n                , state.currentAdmin.username+'#'+state.currentSession.username,\n                false)\n        },\n        addMessage (state,msg) {\n            let mss = state.sessions[state.currentAdmin.username+'#'+msg.to]\n            if (!mss){\n                Vue.set(state.sessions,state.currentAdmin.username+'#'+msg.to,[])\n            }\n            state.sessions[state.currentAdmin.username+'#'+msg.to].push({\n                content: msg.content,\n                date: new Date(),\n                self: !msg.notSelf\n            })\n        },\n        INIT_DATA (state) {\n            // 浏览器本地的历史聊天记录\n            let data = localStorage.getItem('vue-chat-session');\n            if (data) {\n                state.sessions = JSON.parse(data);\n            }\n        },\n    },\n    //唯一可以改变state值的方法(异步执行)\n    actions: {\n        connect(context){\n            context.state.stomp = Stomp.over(new SockJS('/ws/ep'));\n            let token = window.sessionStorage.getItem('tokenStr')\n            context.state.stomp.connect({'Auth-Token':token}\n                ,success => {\n                    context.state.stomp.subscribe('/user/queue/chat',msg => {\n                        // console.log(msg.body)\n                        let receiveMsg = JSON.parse(msg.body)\n                        if (!context.state.currentSession || receiveMsg.from !== context.state.currentSession.username){\n                            Notification.info({\n                                title: '【'+receiveMsg.nickName+'】发来一条消息！',\n                                message: receiveMsg.contentlength > 10 ? receiveMsg.content.substr(0,10) : receiveMsg.content,\n                                position: 'bottom-right'\n                            })\n                            Vue.set(context.state.isDot\n                                , context.state.currentAdmin.username+'#'+receiveMsg.from,\n                                true)\n                        }\n                        receiveMsg.notSelf = true\n                        receiveMsg.to = receiveMsg.from\n                        context.commit('addMessage',receiveMsg)\n                    })\n                },error => {\n\n                })\n        },\n        initData (context) {\n            context.commit('INIT_DATA')\n            getRequest('/chat/listAll').then(res => {\n                if (res){\n                    context.commit('INIT_ADMINS',res)\n                }\n            })\n        }\n    },\n    modules: {}\n})\n\nstore.watch(function (state) {\n    return state.sessions\n},function (val) {\n    // console.log('CHANGE: ', val);\n    localStorage.setItem('vue-chat-session', JSON.stringify(val));\n},{\n    deep:true/*这个貌似是开启watch监测的判断,官方说明也比较模糊*/\n})\n\n\nexport default store;\n"],"mappings":"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"}]}