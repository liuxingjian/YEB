{"remainingRequest":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\components\\sys\\basic\\DepMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\components\\sys\\basic\\DepMana.vue","mtime":1666527853824},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js","mtime":1666529051466},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js","mtime":1666529052140}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogIkRlcE1hbmEiLAogICAgICAgIGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBmaWx0ZXJUZXh0OiAnJywKICAgICAgICAgICAgICAgIGRlcHREYXRhOiBbXSwKICAgICAgICAgICAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGRlcHQ6IHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgICAgICBwYXJlbnRJZDogLTEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBwTmFtZTogJycKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgd2F0Y2g6IHsKICAgICAgICAgICAgZmlsdGVyVGV4dCh2YWwpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbW91bnRlZCgpIHsKICAgICAgICAgICAgdGhpcy5pbml0RGVwdCgpOwogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICBzaG93QWRkKGRlcHQpewogICAgICAgICAgICAgICAgdGhpcy5kZXB0LnBhcmVudElkID0gZGVwdC5pZAogICAgICAgICAgICAgICAgdGhpcy5wTmFtZSA9IGRlcHQubmFtZQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGREZXB0KCl7CiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZXF1ZXN0KCcvc3lzdGVtL2Jhc2ljL2RlcGFydG1lbnQvYWRkJyx0aGlzLmRlcHQpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERlcHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXB0ID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucE5hbWU9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkZWxldGVEZXB0KGRlcHQpewogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk44CQJytkZXB0Lm5hbWUrJ+OAkemDqOmXqCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVSZXF1ZXN0KCcvc3lzdGVtL2Jhc2ljL2RlcGFydG1lbnQvZGVsZXRlLycrZGVwdC5pZCkudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdERlcHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLm5hbWUuaW5kZXhPZih2YWx1ZS50cmltKCkpICE9PSAtMTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdERlcHQoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmdldFJlcXVlc3QoJy9zeXN0ZW0vYmFzaWMvZGVwYXJ0bWVudC9saXN0QWxsJykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXB0RGF0YSA9IHJlcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["DepMana.vue"],"names":[],"mappings":";AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DepMana.vue","sourceRoot":"src/components/sys/basic","sourcesContent":["<template>\n    <div style=\"width: 500px\">\n        <el-input\n                prefix-icon=\"el-icon-search\"\n                placeholder=\"输入关键字进行部门过滤...\"\n                v-model=\"filterText\">\n        </el-input>\n\n        <el-tree\n                :data=\"deptData\"\n                :props=\"defaultProps\"\n                default-expand-all\n                :filter-node-method=\"filterNode\"\n                :expand-on-click-node=\"false\"\n                ref=\"tree\">\n            <span class=\"custom-tree-node\"\n                  slot-scope=\"{ node, data }\"\n                  style=\"display: flex;justify-content: space-between;width: 100%\">\n                <span>{{ data.name }}</span>\n                <span>\n                      <el-button\n                              class=\"btnStyle\"\n                              type=\"primary\"\n                              size=\"mini\"\n                              @click=\"() => showAdd(data)\">\n                        添加部门\n                      </el-button>\n                      <el-button\n                              class=\"btnStyle\"\n                              type=\"danger\"\n                              size=\"mini\"\n                              @click=\"() => deleteDept(data)\">\n                        删除部门\n                      </el-button>\n                    </span>\n            </span>\n        </el-tree>\n        <el-dialog\n                title=\"添加部门\"\n                :visible.sync=\"dialogVisible\"\n                width=\"30%\">\n            <div>\n                <table>\n                    <tr>\n                        <td><el-tag>上级部门</el-tag></td>\n                        <td>{{pName}}</td>\n                    </tr>\n                    <tr>\n                        <td><el-tag>部门名称</el-tag></td>\n                        <td><el-input v-model=\"dept.name\" placeholder=\"请输入部门名称...\"></el-input></td>\n                    </tr>\n                </table>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click=\"dialogVisible = false\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"addDept\">确 定</el-button>\n            </span>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"DepMana\",\n        data() {\n            return {\n                filterText: '',\n                deptData: [],\n                defaultProps: {\n                    children: 'children',\n                    label: 'name'\n                },\n                dialogVisible: false,\n                dept: {\n                    name: '',\n                    parentId: -1\n                },\n                pName: ''\n            }\n        },\n        watch: {\n            filterText(val) {\n                this.$refs.tree.filter(val);\n            }\n        },\n        mounted() {\n            this.initDept();\n        },\n        methods: {\n            showAdd(dept){\n                this.dept.parentId = dept.id\n                this.pName = dept.name\n                this.dialogVisible = true\n            },\n            addDept(){\n                this.postRequest('/system/basic/department/add',this.dept).then(res => {\n                    if (res) {\n                        this.initDept();\n                        this.dept = {};\n                        this.pName= '';\n                        this.dialogVisible = false\n                    }\n                });\n            },\n            deleteDept(dept){\n                this.$confirm('此操作将永久删除【'+dept.name+'】部门, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    this.deleteRequest('/system/basic/department/delete/'+dept.id).then(resp=>{\n                        if (resp){\n                            this.initDept();\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n            },\n            filterNode(value, data) {\n                if (!value) return true;\n                return data.name.indexOf(value.trim()) !== -1;\n            },\n            initDept() {\n                this.getRequest('/system/basic/department/listAll').then(res => {\n                    if (res) {\n                        this.deptData = res\n                    }\n                });\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    .btnStyle{\n        padding: 2px;\n    }\n</style>\n"]}]}