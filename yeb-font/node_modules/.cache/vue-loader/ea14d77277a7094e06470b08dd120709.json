{"remainingRequest":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\components\\sys\\basic\\PosMana.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\components\\sys\\basic\\PosMana.vue","mtime":1666527853824},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js","mtime":1666529051466},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js","mtime":1666529052140}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogIlBvc01hbmEiLAogICAgICAgIGRhdGEoKXsKICAgICAgICAgICAgcmV0dXJuewogICAgICAgICAgICAgICBwb3M6ewogICAgICAgICAgICAgICAgICAgbmFtZTonJywKICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6JycsCiAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB1cGRhdGVQb3M6ewogICAgICAgICAgICAgICAgICAgIG5hbWU6JycsCiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDonJwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHBvc2l0aW9uczpbXSwKICAgICAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6ZmFsc2UsCiAgICAgICAgICAgICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10KICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbW91bnRlZCgpIHsKICAgICAgICAgIHRoaXMuaW5pdFBvc2l0aW9ucygpOwogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczp7CiAgICAgICAgICAgIGRlbGV0ZUJhdGNoKCl7CiAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTjgJAnK3RoaXMubXVsdGlwbGVTZWxlY3Rpb24ubGVuZ3RoKyfjgJHogYzkvY0sIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBpZHM9W107CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWRzKz0naWRzPScraXRlbS5pZCsnJicKICAgICAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVSZXF1ZXN0KCcvc3lzdGVtL2Jhc2ljL3Bvcy9kZWxldGVCYXRjaC8/aWRzPScraWRzKS50aGVuKHJlc3A9PnsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3ApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKXsKICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb249dmFsOwogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93RWRpdFZpZXcoaW5kZXgsZGF0YSl7CiAgICAgICAgICAgICAgICAvLyB0aGlzLnVwZGF0ZVBvcz1kYXRhOwogICAgICAgICAgICAgICAgLy/miopkYXRh5pWw5o2u5ou36LSd57uZdXBkYXRlUG9z5Zue5pi+5Yiw5pu05paw5qGGCiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMudXBkYXRlUG9zLGRhdGEpOwogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3MuY3JlYXRlRGF0ZT0nJzsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZT10cnVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkb1VwZGF0ZSgpewogICAgICAgICAgICAgICAgdGhpcy5wb3N0UmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9wb3MvdXBkYXRlLycsdGhpcy51cGRhdGVQb3MpLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUG9zLm5hbWU9Jyc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZT1mYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGFuZGxlRGVsZXRlKGluZGV4LGRhdGEpewogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk44CQJytkYXRhLm5hbWUrJ+OAkeiBjOS9jSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVJlcXVlc3QoJy9zeXN0ZW0vYmFzaWMvcG9zL2RlbGV0ZS8nK2RhdGEuaWQpLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5Yig6ZmkJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRQb3NpdGlvbigpewogICAgICAgICAgICAgIGlmICh0aGlzLnBvcy5uYW1lKXsKICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0UmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9wb3MvYWRkLycsdGhpcy5wb3MpLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3ApewogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0UG9zaXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcy5uYW1lPScnOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5re75Yqg6IGM5L2N5LiN6IO95Li656m6IikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXRQb3NpdGlvbnMoKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVxdWVzdCgnL3N5c3RlbS9iYXNpYy9wb3MvbGlzdEFsbCcpLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbnM9cmVzcDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICB9Cg=="},{"version":3,"sources":["PosMana.vue"],"names":[],"mappings":";AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA","file":"PosMana.vue","sourceRoot":"src/components/sys/basic","sourcesContent":["<template>\n<div>\n    <div>\n        <el-input\n                class=\"addPosInput\"\n                size=\"small\"\n                @keydown.enter.native=\"addPosition\"\n                placeholder=\"添加职位\"\n                suffix-icon=\"el-icon-plus\"\n                v-model=pos.name>\n        </el-input>\n        <el-switch\n                style=\"margin:0 10px\"\n                v-model=\"pos.enabled\"\n                active-color=\"#13ce66\"\n                inactive-color=\"#ff4949\"\n                active-text=\"启用\"\n                inactive-text=\"暂不启用\">\n        </el-switch>\n\n        <el-button size=\"small\" icon=\"el-icon-plus\" type=\"primary\" @click=\"addPosition\">添加</el-button>\n    </div>\n    <div class=\"posManaMain\">\n        <el-table\n                :data=\"positions\"\n                stripe\n                border\n                style=\"width: 100%;text-align: center\"\n                @selection-change=\"handleSelectionChange\">>\n            <el-table-column\n                    type=\"selection\"\n                    width=\"55\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"id\"\n                    label=\"编号\"\n                    width=\"55\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"name\"\n                    label=\"职位\"\n                    width=\"150\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"createDate\"\n                    label=\"创建时间\"\n                    width=\"150\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"enabled\"\n                    label=\"是否启用\"\n                    width=\"150\">\n                <template slot-scope=\"scope\">\n                    <el-tag v-if=\"scope.row.enabled\" type=\"success\">已启用</el-tag>\n                    <el-tag v-else type=\"danger\">未启用</el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"操作\">\n                <template slot-scope=\"scope\">\n                    <el-button\n                            size=\"mini\"\n                            @click=\"showEditView(scope.$index, scope.row)\">编辑</el-button>\n                    <el-button\n                            size=\"mini\"\n                            type=\"danger\"\n                            @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n        <el-button style=\"margin-top: 8px;margin-inside: 30px\"\n                   type=\"danger\" size=\"small\"\n                   :disabled=\"this.multipleSelection.length === 0\"\n                   @click=\"deleteBatch\">\n                   批量删除\n        </el-button>\n    </div>\n    <el-dialog\n            title=\"职位编辑\"\n            :visible.sync=\"dialogVisible\"\n            width=\"30%\">\n           <div>\n               <table>\n                   <tr>\n                       <td>\n                           <el-tag>职位名称:</el-tag>\n                       </td>\n                       <td>\n                           <el-input v-model=\"updatePos.name\" size=\"small\"\n                                     class=\"updatePosInput\"></el-input>\n                       </td>\n                   </tr>\n                   <tr>\n                       <td>\n                           <el-tag>是否启用:</el-tag>\n                       </td>\n                       <td>\n                           <el-switch\n                                   style=\"margin-left: 10px\"\n                                   v-model=\"updatePos.enabled\"\n                                   active-color=\"#13ce66\"\n                                   inactive-color=\"#ff4949\"\n                                   active-text=\"启用\"\n                                   inactive-text=\"暂不启用\">\n                           </el-switch>\n                       </td>\n                   </tr>\n               </table>\n           </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button size=\"small\" @click=\"dialogVisible = false\">取 消</el-button>\n            <el-button size=\"small\" type=\"primary\" @click=\"doUpdate\">确 定</el-button>\n          </span>\n    </el-dialog>\n\n</div>\n</template>\n\n<script>\n    export default {\n        name: \"PosMana\",\n        data(){\n            return{\n               pos:{\n                   name:'',\n                   enabled:'',\n               },\n                updatePos:{\n                    name:'',\n                    enabled:''\n                },\n                positions:[],\n                dialogVisible:false,\n                multipleSelection: []\n            }\n        },\n        mounted() {\n          this.initPositions();\n        },\n        methods:{\n            deleteBatch(){\n                this.$confirm('此操作将永久删除【'+this.multipleSelection.length+'】职位, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                    let ids=[];\n                    this.multipleSelection.forEach(item=>{\n                        // ids+='ids='+item.id+'&'\n                        ids.push(item.id);\n                    });\n                    this.deleteRequest('/system/basic/pos/deleteBatch/?ids='+ids).then(resp=>{\n                        console.log(ids);\n                        if (resp){\n                            this.initPositions();\n                        }\n                    })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n\n\n            },\n            handleSelectionChange(val){\n                this.multipleSelection=val;\n            },\n            showEditView(index,data){\n                // this.updatePos=data;\n                //把data数据拷贝给updatePos回显到更新框\n                Object.assign(this.updatePos,data);\n                this.updatePos.createDate='';\n                this.dialogVisible=true;\n            },\n            doUpdate(){\n                this.postRequest('/system/basic/pos/update/',this.updatePos).then(resp=>{\n                    if (resp){\n                        this.initPositions();\n                        this.updatePos.name='';\n                        this.dialogVisible=false;\n                    }\n                })\n\n            },\n            handleDelete(index,data){\n                this.$confirm('此操作将永久删除【'+data.name+'】职位, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => {\n                   this.deleteRequest('/system/basic/pos/delete/'+data.id).then(resp=>{\n                       if (resp){\n                           this.initPositions();\n                       }\n                   })\n                }).catch(() => {\n                    this.$message({\n                        type: 'info',\n                        message: '已取消删除'\n                    });\n                });\n\n            },\n            addPosition(){\n              if (this.pos.name){\n                  this.postRequest('/system/basic/pos/add/',this.pos).then(resp=>{\n                      if (resp){\n                         this.initPositions();\n                         this.pos.name='';\n                      }\n                  })\n              }else {\n                  this.$message.error(\"添加职位不能为空\")\n              }\n            },\n            initPositions(){\n                this.getRequest('/system/basic/pos/listAll').then(resp=>{\n                    if (resp){\n                        this.positions=resp;\n                    }\n                })\n\n            }\n\n        }\n    }\n</script>\n\n<style scoped>\n  .addPosInput{\n        width: 300px;\n        margin-right: 8px;\n    }\n    .posManaMain{\n        margin-top: 10px;\n    }\n    .updatePosInput{\n        width: 200px;\n        margin-left: 8px;\n    }\n\n</style>\n"]}]}