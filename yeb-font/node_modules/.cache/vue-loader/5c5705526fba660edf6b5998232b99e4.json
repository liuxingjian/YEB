{"remainingRequest":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\views\\sal\\SalSobCfg.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\src\\views\\sal\\SalSobCfg.vue","mtime":1666527853824},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\babel-loader\\lib\\index.js","mtime":1666529051466},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666529050686},{"path":"D:\\workplace\\myProject\\yeb\\yeb1\\yeb\\yeb-font\\node_modules\\vue-loader\\lib\\index.js","mtime":1666529052140}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogIlNhbFNvYkNmZyIsCiAgICAgICAgZGF0YSgpewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgZW1wczogW10sCiAgICAgICAgICAgICAgICBzYWxhcmllczpbXSwKICAgICAgICAgICAgICAgIGN1cnJlbnRTYWxhcnk6IG51bGwsCiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICAgICAgICAgIHNpemU6IDEwLAogICAgICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG1vdW50ZWQoKSB7CiAgICAgICAgICAgIHRoaXMuaW5pdEVtcCgpCiAgICAgICAgICAgIHRoaXMuaW5pdFNhbGFyeSgpCiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOnsKICAgICAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZShjdXJyZW50UGFnZSkgewogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlCiAgICAgICAgICAgICAgICB0aGlzLmluaXRFbXAoKQogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHNpemUpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemUKICAgICAgICAgICAgICAgIHRoaXMuaW5pdEVtcCgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhpZGVTYWxhcnkoZGF0YSl7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zYWxhcnkpewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTYWxhcnkgIT09IGRhdGEuc2FsYXJ5LmlkKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0UmVxdWVzdCgnL3NhbGFyeS9zb2JjZmcvdXBkYXRlLycrZGF0YS5pZCsnLycrdGhpcy5jdXJyZW50U2FsYXJ5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRFbXAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRTYWxhcnkpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZXF1ZXN0KCcvc2FsYXJ5L3NvYmNmZy91cGRhdGUvJytkYXRhLmlkKycvJyt0aGlzLmN1cnJlbnRTYWxhcnkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEVtcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93U2FsYXJ5KHNhbCl7CiAgICAgICAgICAgICAgICBpZiAoc2FsKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTYWxhcnkgPSBzYWwuaWQKICAgICAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTYWxhcnkgPSBudWxsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXRTYWxhcnkoKXsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVxdWVzdCgnL3NhbGFyeS9zb2IvbGlzdEFsbCcpLnRoZW4ocmVzID0+ewogICAgICAgICAgICAgICAgICAgIGlmIChyZXMpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhbGFyaWVzID0gcmVzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5pdEVtcCgpewogICAgICAgICAgICAgICAgdGhpcy5wb3N0UmVxdWVzdCgnL3NhbGFyeS9zb2JjZmcvbGlzdEFsbC8/Y3VycmVudFBhZ2U9Jyt0aGlzLmN1cnJlbnRQYWdlKycmc2l6ZT0nK3RoaXMuc2l6ZSkKICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcyl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1wcyA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQo="},{"version":3,"sources":["SalSobCfg.vue"],"names":[],"mappings":";AA2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SalSobCfg.vue","sourceRoot":"src/views/sal","sourcesContent":["<template>\n    <div>\n        <el-table\n                :data=\"emps\"\n                stripe\n                size=\"mini\"\n                style=\"width: 100%\">\n            <el-table-column\n                    type=\"selection\"\n                    align=\"left\"\n                    width=\"55\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"name\"\n                    label=\"姓名\"\n                    align=\"center\"\n                    fixed\n                    width=\"80\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"workID\"\n                    label=\"工号\"\n                    align=\"center\"\n                    width=\"100\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"email\"\n                    label=\"邮箱地址\"\n                    align=\"center\"\n                    width=\"180\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"phone\"\n                    label=\"电话号码\"\n                    align=\"center\"\n                    width=\"130\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"department.name\"\n                    label=\"所属部门\"\n                    align=\"center\"\n                    width=\"130\">\n            </el-table-column>\n            <el-table-column\n                    label=\"工资账套\"\n                    align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-tooltip placement=\"right\" v-if=\"scope.row.salary\">\n                        <template #content>\n                           <table>\n                               <tr>\n                                   <td>基本工资:</td>\n                                   <td>{{scope.row.salary.basicSalary}}</td>\n                               </tr>\n                               <tr>\n                                   <td>奖金:</td>\n                                   <td>{{scope.row.salary.bonus}}</td>\n                               </tr>\n                               <tr>\n                                   <td>午餐补助:</td>\n                                   <td>{{scope.row.salary.lunchSalary}}</td>\n                               </tr>\n                               <tr>\n                                   <td>交通补助:</td>\n                                   <td>{{scope.row.salary.trafficSalary}}</td>\n                               </tr>\n                               <tr>\n                                   <td>养老金比率:</td>\n                                   <td>{{scope.row.salary.pensionBase}}</td>\n                               </tr>\n                               <tr>\n                                   <td>养老金基数:</td>\n                                   <td>{{scope.row.salary.pensionPer}}</td>\n                               </tr>\n                               <tr>\n                                   <td>医疗保险基数:</td>\n                                   <td>{{scope.row.salary.medicalBase}}</td>\n                               </tr>\n                               <tr>\n                                   <td>医疗保险比率:</td>\n                                   <td>{{scope.row.salary.medicalPer}}</td>\n                               </tr>\n                               <tr>\n                                   <td>公积金基数:</td>\n                                   <td>{{scope.row.salary.accumulationFundBase}}</td>\n                               </tr>\n                               <tr>\n                                   <td>公积金:</td>\n                                   <td>{{scope.row.salary.accumulationFundPer}}</td>\n                               </tr>\n\n                           </table>\n                        </template>\n                        <el-tag>{{scope.row.salary.name}}</el-tag>\n                    </el-tooltip>\n                    <el-tag v-else>暂未设置</el-tag>\n                </template>\n            </el-table-column>\n            <el-table-column\n                    label=\"操作\"\n                    align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-popover\n                            placement=\"left\"\n                            title=\"编辑工资账套\"\n                            :width=\"200\"\n                            @show=\"showSalary(scope.row.salary)\"\n                            @hide=\"hideSalary(scope.row)\"\n                            trigger=\"click\"\n                    >\n                        <div>\n                            <el-select v-model=\"currentSalary\" size=\"mini\" placeholder=\"请选择\">\n                                <el-option\n                                        v-for=\"item in salaries\"\n                                        :key=\"item.id\"\n                                        :label=\"item.name\"\n                                        :value=\"item.id\"\n                                ></el-option>\n                            </el-select>\n                        </div>\n                        <el-button slot=\"reference\" type=\"danger\">修改工资账套</el-button>\n                    </el-popover>\n                </template>\n            </el-table-column>\n        </el-table>\n        <el-pagination\n                style=\"display: flex;justify-content: flex-end\"\n                @size-change=\"handleSizeChange\"\n                @current-change=\"handleCurrentChange\"\n                :current-page=\"currentPage\"\n                :page-sizes=\"[10, 20, 30, 40, 50, 100]\"\n                :page-size=\"size\"\n                layout=\"total, sizes, prev, pager, next, jumper\"\n                :total=\"total\">\n        </el-pagination>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"SalSobCfg\",\n        data(){\n            return {\n                emps: [],\n                salaries:[],\n                currentSalary: null,\n                currentPage: 1,\n                size: 10,\n                total: 0,\n            }\n        },\n        mounted() {\n            this.initEmp()\n            this.initSalary()\n        },\n        methods:{\n            handleCurrentChange(currentPage) {\n                this.currentPage = currentPage\n                this.initEmp()\n            },\n            handleSizeChange(size) {\n                this.size = size\n                this.initEmp()\n            },\n            hideSalary(data){\n                if (data.salary){\n                    if (this.currentSalary !== data.salary.id){\n                        this.postRequest('/salary/sobcfg/update/'+data.id+'/'+this.currentSalary)\n                            .then(res =>{\n                                if (res){\n                                    this.initEmp()\n                                }\n                            })\n                    }\n                }else {\n                    if (this.currentSalary){\n                        this.postRequest('/salary/sobcfg/update/'+data.id+'/'+this.currentSalary)\n                            .then(res =>{\n                                if (res){\n                                    this.initEmp()\n                                }\n                            })\n                    }\n                }\n\n            },\n            showSalary(sal){\n                if (sal){\n                    this.currentSalary = sal.id\n                }else {\n                    this.currentSalary = null\n                }\n            },\n            initSalary(){\n                this.getRequest('/salary/sob/listAll').then(res =>{\n                    if (res){\n                        this.salaries = res\n                    }\n                })\n            },\n            initEmp(){\n                this.postRequest('/salary/sobcfg/listAll/?currentPage='+this.currentPage+'&size='+this.size)\n                .then(res => {\n                    if (res){\n                        this.emps = res.data\n                        this.total = res.total\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}